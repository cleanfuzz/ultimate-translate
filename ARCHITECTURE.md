# Архитектура проекта `ultimate-translate` 

[//]: # (АРХИТЕКТУРА __ГЛАВНОЙ__ ВЕТКИ!)
[//]: # (TODO: Переписать файл архитектуры при изменнениях в проекте в devel-ветке)

---

### Мои модули

- `main.py` - __точка входа в программу__
    - Получение аргументов командной строки
    - Валидация файлов и их обработка


- `tui.py` - __функции для работы с красивым выводом в терминале__
    - Активация вывода отладочных сообщений по ключу `--debug`
    - Отображение цветного текста
    - Префиксы к сообщениям: `DEBUG`, `INFO`, `WARN`, `ERROR`
    - Осуществляется с помощью [`rich`](https://github.com/Textualize/rich), [`colorama`](https://github.com/tartley/colorama)


- `cli_arguments.py` - __обработка аргументов командной строки__
    - Обрабатывает все аргументы командной строки
    - Выставляет значения по умолчанию для `--destination-language` и `--source-language`, если не указаны
    - Проверяет входные файлы на корректность


- `parse_yaml.py` - __работа с `YAML` и вложенными словарями__
    - Главная функция модуля - `manipulate_input_files()`, в ней содержатся все вызовы функций модуля перевода - `translate.py`
    - Также в данном модуле находится функция для получения максимально вложенных ключей из `YAML-файла` с помощью библиотеки `yaml_keygen_utf_8`
    - И другие функции для работы со вложенными системами, состоящих из пар `ключ:значение`

- `translate.py` - __перевод значений, выбор пользователем сервиса перевода__
    - `translate_value()` - функция для перевода единственного значения с помощью одного сервиса перевода; хорошо работает в связке с циклами `for`
    - `interactive_choices()` - функция для получения значений из:
        - `prompt_for_trans_services()`, 
        - `prompt_for_yaml_tags()`,
        - `prompt_for_translation_variants()`
    - Функции `prompt_for_*` предназначены для запроса у пользователя определенного значения, связанного с выбором конечного перевода



---

### Сторонние библиотеки с внесенными изменениями

- `yaml_keygen_utf_8`
    - Модуль для получения ключей с максимальной вложенностью из `YAML-файла`, т. е. ключи, которым соотвествует единственное значение, и оно не является ключом
    - Оригинальный модуль с единственным изменением: теперь он читает только `UTF-8`  
    - __[Ссылка](https://github.com/fa1zali/yaml_keygen)__ на оригинальный модуль - [`yaml_keygen`](https://github.com/fa1zali/yaml_keygen)


- `translators_fix`
    - Модуль перевода текста или `html` в 36 различных сервисах
    - Перевод в `Yandex.Translate` не работал, поэтому было принято решение сделать копию модуля и вернуть эту возможность (на данный момент, поправить перевод пока не удалось)
    - __[Ссылка](https://github.com/UlionTse/translators)__ на оригинальный модуль - [`translators`](https://github.com/UlionTse/translators)